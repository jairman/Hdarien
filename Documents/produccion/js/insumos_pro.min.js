var TotalCostoApx=0;var IdCostoApx="";$(document).on("ready",function(){$(".cerrar label").on("click",cerrarVentana);});function costoTotalProximado(a){controles=document.getElementsByTagName("input");
TotalCostoApx=0;for(i=0;i<controles.length;i++){if(controles[i].name=="costoA[]"){if(controles[i].value==""){numero=0;}else{numero=controles[i].value;}TotalCostoApx=parseInt(numero)+parseInt(TotalCostoApx);
}}$("#totalA").html(TotalCostoApx);$("#totalInsumo").val(TotalCostoApx.toFixed(2));}function cerrarVentana(){$(".ventana").fadeOut();}function filtroInsumos(a){$.get("../controllers/controlador.php?filtroInsumos",llegadaFiltroInsumos);
}function llegadaFiltroInsumos(data){var datos="";var capa=$("#b_tipo").html("");var json=eval("("+data+")");for(i=0;i<json.length;i++){datos+='<option value="'+json[i].tipo+'" >'+json[i].tipo+"</option>";
}capa.append(datos);}function buscarInsumoTela(a){$.get("../controllers/controlador.php?buscarInsumoTela",llegadaBuscarInsumosTelas);}function llegadaBuscarInsumosTelas(data){$().css("display","");
var datos="";var suma="";var capa=$("#tabla_insumos_telas tbody").html("");var json=eval("("+data+")");$(".modalLoad").fadeOut();$(".ventana").fadeIn();
for(i=0;i<json.length;i++){id=json[0].id_insumo;}for(i=0;i<json.length;i++){id2=json[i].id_insumo;datos+='<tr align="center" class="row" id="tr'+json[i].id+'">';
datos+="<td onclick=\"agregarInsumos('"+json[i].id+"','"+json[i].tipo+"', '"+json[i].nombre+"','"+json[i].presentacion+"','"+json[i].contenido+"')\">"+json[i].tipo+"</td>";
datos+="<td>"+json[i].nombre+"</td>";datos+="<td>"+json[i].marca+"</td>";datos+="<td>"+json[i].descripcion+"</td>";datos+="<td>"+json[i].presentacion+"</td>";
datos+="<td>"+json[i].contenido+"</td>";datos+="<td>"+json[i].minimo+"</td>";datos+="</tr>";}capa.append(datos);}function buscarInsumo(a){$.get("../controllers/controlador.php?buscarInsumo",llegadaBuscarInsumos);
}function llegadaBuscarInsumos(data){filtroInsumos();var datos="";var suma="";var capa=$(" #tabla_insumos tbody").html("");var json=eval("("+data+")");
$(".modalLoad").fadeOut();$(".ventana").fadeIn();for(i=0;i<json.length;i++){id=json[0].id_insumo;}for(i=0;i<json.length;i++){id2=json[i].id_insumo;datos+='<tr align="center" class="row" id="tr'+json[i].id+'">';
datos+="<td onclick=\"agregarInsumos('"+json[i].id+"','"+json[i].tipo+"', '"+json[i].nombre+"','"+json[i].presentacion+"','"+json[i].contenido+"')\">"+json[i].tipo+"</td>";
datos+="<td>"+json[i].nombre+"</td>";datos+="<td>"+json[i].marca+"</td>";datos+="<td>"+json[i].descripcion+"</td>";datos+="<td>"+json[i].presentacion+"</td>";
datos+="<td>"+json[i].contenido+"</td>";datos+="<td>"+json[i].minimo+"</td>";datos+="</tr>";}capa.append(datos);}function agregarInsumos(e,b,d,a,c){$("#t_insumos").append('<tr id="tr'+e+'" class="row"><input type="hidden" id="insumo" name="insumo[]" class="listaInput" disabled value="'+e+'" ><td class="cont" align="center"><input type="text" id="tipo" name="tipo" class="listaInput" disabled style="width:75%" value="'+b+'"></td><td class="cont" align="center"><input type="text" class="listaInput long" disabled   value="'+d+'"></td><td class="cont" align="center" ><input type="text" class="listaInput long" disabled value="'+a+'" ></td><td class="cont" align="center"><input type="text" cclass="listaInput long" disabled value="'+c+'"></td><td class="cont" align="center"><input type="text" class="long" id="cantidad" name="cantidad[]" required></td><td class="cont" align="center"><input type="text" class="long" required id="costoA" name="costoA[]" class="costoA" onkeyup="costoTotalProximado(this)"></td><td align="center"><img src="../../img/erase.png" id="quitarInsumo" width="20" height="20" style="cursor:pointer;" title="Eliminar" onclick="removerChild(\'tr'+e+"')\"></td></tr>");
removerChild("tr"+e);}